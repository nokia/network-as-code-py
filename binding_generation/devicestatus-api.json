{"openapi":"3.0.2","info":{"title":"Device Status","description":"Device Status can provide updates on the device's connectivity state","version":"0.1.0"},"paths":{"/connectivity":{"post":{"summary":"Create subscription for device connectivity status","description":"Create subscription for device connectivity status.","operationId":"createConnectivitySubscription","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectivitySubscription"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectivityData"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/event-subscriptions":{"post":{"summary":"Create subscription for device status events","description":"Create subscriptions for device status events.","operationId":"createEventSubscription","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateEventSubscription"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventSubscriptionInfo"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/event-subscriptions/{id}":{"get":{"summary":"Retrieve a device status event subscription for a device","description":"retrieve event subscription information for a given subscription","operationId":"getEventSubscription","parameters":[{"required":true,"schema":{"title":"Id","type":"string"},"name":"id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventSubscriptionInfo"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Delete Event Subscription Handler","operationId":"deleteEventSubscription","parameters":[{"required":true,"schema":{"title":"Id","type":"string"},"name":"id","in":"path"}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/connectivity/{id}":{"get":{"summary":"Get device connectivity status","description":"Retrieve device connectivity status data","operationId":"getConnectivity","parameters":[{"required":true,"schema":{"title":"Id","type":"string"},"name":"id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectivityData"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"summary":"Update device connectivity status","description":"Update device connectivity status data","operationId":"updateConnectivity","parameters":[{"required":true,"schema":{"title":"Id","type":"string"},"name":"id","in":"path"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectivitySubscription"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConnectivityData"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"summary":"Delete Connectivity Handler","operationId":"deleteConnectivity","parameters":[{"required":true,"schema":{"title":"Id","type":"string"},"name":"id","in":"path"}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"ConnectivityData":{"title":"ConnectivityData","required":["id"],"type":"object","properties":{"id":{"title":"Id","type":"string","description":"ID of the created resource."},"maxNumOfReports":{"title":"Maxnumofreports","type":"integer","description":"Number of notifications until the subscription is available"}}},"ConnectivitySubscription":{"title":"ConnectivitySubscription","required":["maxNumOfReports","notificationUrl"],"type":"object","properties":{"device":{"title":"Device","allOf":[{"$ref":"#/components/schemas/Device"}],"description":"Identifier of the device"},"id":{"title":"Id","type":"string","description":"Identifier of the device"},"maxNumOfReports":{"title":"Maxnumofreports","minimum":1.0,"type":"integer","description":"Number of notifications until the subscription is available"},"notificationUrl":{"title":"Notificationurl","type":"string","description":"Notification URL for session-related events."},"notificationAuthToken":{"title":"Notificationauthtoken","type":"string","description":"Authorization token for notification sending."}}},"CreateEventSubscription":{"title":"CreateEventSubscription","required":["subscriptionDetail","webhook"],"type":"object","properties":{"subscriptionDetail":{"title":"Subscriptiondetail","allOf":[{"$ref":"#/components/schemas/EventSubscriptionDetail"}],"description":"Event subscription details"},"subscriptionExpireTime":{"title":"Subscriptionexpiretime","type":"string","description":"The subscription expiration time in date-time format","examples":["2023-01-17T13:18:23.682Z"]},"maxNumberOfReports":{"title":"Maxnumberofreports","maximum":256.0,"minimum":1.0,"type":"integer","description":"Number of notifications until the subscription is available","default":1},"webhook":{"$ref":"#/components/schemas/Webhook"}}},"Device":{"title":"Device","type":"object","properties":{"phoneNumber":{"title":"Phonenumber","type":"string"},"networkAccessIdentifier":{"title":"Networkaccessidentifier","type":"string"},"ipv4Address":{"$ref":"#/components/schemas/DeviceIpv4Addr"},"ipv6Address":{"title":"Ipv6Address","type":"string"}}},"DeviceIpv4Addr":{"title":"DeviceIpv4Addr","type":"object","properties":{"publicAddress":{"title":"Publicaddress","type":"string","description":"Public IPv4 address of the device. Either of the device or the NAT the device is behind."},"privateAddress":{"title":"Privateaddress","type":"string","description":"Private IPv4 address of the device, if it is behind a NAT."},"publicPort":{"title":"Publicport","type":"integer","description":"Public port used by the device. Port is necessary, as private address ranges overlap, and public port is used to extend the range for CGNAT."}}},"EventSubscriptionDetail":{"title":"EventSubscriptionDetail","required":["eventType"],"type":"object","properties":{"device":{"title":"Device","allOf":[{"$ref":"#/components/schemas/Device"}],"description":"Identifier of the device"},"eventType":{"title":"Eventtype","type":"string"}}},"EventSubscriptionInfo":{"title":"EventSubscriptionInfo","required":["eventSubscriptionId","subscriptionDetail","webhook"],"type":"object","properties":{"eventSubscriptionId":{"title":"Eventsubscriptionid","type":"string","description":"The event subscription identifier"},"subscriptionDetail":{"title":"Subscriptiondetail","allOf":[{"$ref":"#/components/schemas/EventSubscriptionDetail"}],"description":"Event subscription details"},"subscriptionExpireTime":{"title":"Subscriptionexpiretime","type":"string","description":"The subscription expiration time in date-time format","examples":["2023-01-17T13:18:23.682Z"]},"maxNumberOfReports":{"title":"Maxnumberofreports","minimum":1.0,"type":"integer","description":"Number of notifications until the subscription is available"},"webhook":{"$ref":"#/components/schemas/Webhook"},"startsAt":{"title":"Startsat","type":"string","description":"date time when subscription started"},"expiresAt":{"title":"Expiresat","type":"string","description":"date time when subscription will expire or expired"}}},"HTTPValidationError":{"title":"HTTPValidationError","type":"object","properties":{"detail":{"title":"Detail","type":"array","items":{"$ref":"#/components/schemas/ValidationError"}}}},"ValidationError":{"title":"ValidationError","required":["loc","msg","type"],"type":"object","properties":{"loc":{"title":"Location","type":"array","items":{"anyOf":[{"type":"string"},{"type":"integer"}]}},"msg":{"title":"Message","type":"string"},"type":{"title":"Error Type","type":"string"}}},"Webhook":{"title":"Webhook","required":["notificationUrl"],"type":"object","properties":{"notificationUrl":{"title":"Notificationurl","type":"string","description":"Notification URL for session-related events.","examples":["https://application-server.com"]},"notificationAuthToken":{"title":"Notificationauthtoken","type":"string","description":"Authorization token for notification sending.","examples":["c8974e592c2fa383d4a3960714"]}}}}}}